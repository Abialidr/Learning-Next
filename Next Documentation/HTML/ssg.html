<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SSG</title>
    <link rel="stylesheet" href="../CSS/global.css" />
  </head>
  <body>
    <header id="header"></header>
    <main>
      <h1 class="main-title">Static Site Generation</h1>
      <section>
        <h1>SSG in detail</h1>
        <h2>SSg happens in 2 ways</h2>
        <ol class="header">
          <li>
            <h2>
              In the first case, the page is static during the build process.
              This means we are not getting any external data from anywhere; our
              page has static data. In this way, Next doesn't need anything and
              can build the project without any problems.In essence, if a page
              is static, SSG will be used without your knowledge.
            </h2>
            <image
              src="../public/SSG2.png"
              class="imageStyle"
              style="width: 500px; height: 500px"
            ></image>
          </li>
          <li>
            <h2>
              In the second way, we are importing some external data with the
              help of an API or any other thing. In this way, SSG first imports
              all the data and then builds all the pages. In this case, the
              functions getStaticProps and getStaticPaths are required. 
            </h2>
            <image
              src="../public/SSG3.png"
              style="width: 500px; height: 500px"
              class="imageStyle"
            ></image>
          </li>
        </ol>
      </section>
      <section>
        <h1>getStaticProps</h1>
        <h2>
          getStaticProps is a function that is used to enable SSG if the data is
          fetched from an external source like a rest API.<br /><br />
          The following are the rules for using getStaticProps:<br />
          <ol class="header">
            <li>
              <h2>getStaticProps should always be exported from page file</h2>
            </li>
            <li>
              <h2>The object is always returned by getStaticProps</h2>
            </li>
            <li>
              <h2>
                The object returned in GSP has many options, but returning props
                as an object is mandatory
              </h2>
            </li>
          </ol>
          This is an method of getStaticProps:
        </h2>
        <textarea style="width: 100%" rows="8">
          
          export async function getStaticProps(context) {
            return {
              props: {}, // will be passed to the page
              component as props
            }
          }
        </textarea>
        <h2>
          getStaticProps takes context as a parameter, which is an object with
          many properties that can be used.
        </h2>
        <h2>
          <a
            href="https://nextjs.org/docs/basic-features/data-fetching/get-static-props"
            >detailed info on getStaticProps</a
          >
        </h2>
        <h2>
          This is an example of getStaticPaths (from coffee-shop-locater project
          ):
        </h2>
        <textarea style="width: 100%" rows="65">
          
          import Head from 'next/head';
          import Image from 'next/image';
          import styles from '@/styles/Home.module.css';
          import Banner from '@/components/Banner';
          import Card from '../components/Card';
          import coffeeStoresData from '../data/coffee-stores.json';

          export default function Home(props) {
            console.log(props, 'props');
            const handleOnBannerBtnClick = () => {
              console.log('this is working');
            };
            return (
              <>
                <Head>
                  <title>Coffee Shop Locater</title>
                  <meta name="description" content="Generated by create next app" />
                  <meta name="viewport" content="width=device-width, initial-scale=1" />
                </Head>
                <main className={styles.main}>
                  <Banner
                    buttonText={'View stores nearby'}
                    handleOnClick={handleOnBannerBtnClick}
                  />
                  <div className={styles.heroImage}>
                    <Image
                      src="/static/hero-image.png"
                      alt="this is header image"
                      width={700}
                      height={400}
                    ></Image>
                  </div>
                  {props.coffeeStores.length > 0 && (
                    <>
                      <h2 className={styles.heading2}>Toronto stores</h2>
                      <div className={styles.cardLayout}>
                        {props.coffeeStores.map((coffeeStore) => {
                          return (
                            <Card
                              key={coffeeStore.id}
                              name={coffeeStore.name}
                              imgUrl={coffeeStore.imgUrl}
                              alt={coffeeStore.id}
                              href={`/coffee-store/${coffeeStore.id}`}
                              className={styles.card}
                            />
                          );
                        })}
                      </div>
                    </>
                  )}
                </main>
              </>
            );
          }

          export async function getStaticProps(context) {
            return {
              props: {
                coffeeStores: coffeeStoresData,
              }, // will be passed to the page component as props
            };
          }
        </textarea>
      </section>
      <section>
        <h1>getStaticPaths</h1>
        <h2>
          An addition to getStaticProps is getStaticPaths. Only dynamic pages
          can benefit from getStaticPaths. You must specify that the page is
          dynamic in getStaticPaths. GetStaticPaths, to put it simply, is a
          method that keeps track of how dynamic the page is (every possible
          dynamic link).<br /><br />

          The following are the rules for using getStaticPaths:<br />
          <ol class="header">
            <li>
              <h2>getStaticPaths should always be exported from page file.</h2>
            </li>
            <li>
              <h2>The object is always returned by getStaticPaths</h2>
            </li>
            <li>
              <h2>
                The object returned in GSP has many options, but returning
                "paths" as an object is mandatory
              </h2>
            </li>
            <li>
              <h2>The page should contain getStaticProps</h2>
            </li>
          </ol>
        </h2>
        <h2>This is an method of getStaticPaths:</h2>
        <textarea style="width: 100%" rows="8">
          
          export async function getStaticPaths() {
            return {
              paths: [{ params: { id: '1' } }, { params: { id: '2' } }],
              fallback: false, // can also be true or 'blocking'
            }
          }
        </textarea>
        <h2>
          fallback is also an important property to be returned(its not
          mandatory but vaery usefull to keep).there is three posiblity to
          fallback <br /><br />
          1) false : If fallback is false, then any paths not returned by
          getStaticPaths will result in a 404 page.<br /><br />
          2) true : If fallback is true, then the behavior of getStaticProps
          changes in the following ways:<br />
          * The paths that have not been generated at build time will not result
          in a 404 page. Instead, Next.js will serve a “fallback” version of the
          page on the first request to such a path. <br />
          * In the background, Next.js will statically generate the requested
          path HTML and JSON. This includes running getStaticProps.<br />
          * When complete, the browser receives the JSON for the generated path.
          This will be used to automatically render the page with the required
          props. From the user’s perspective, the page will be swapped from the
          fallback page to the full page.<br />
          * At the same time, Next.js adds this path to the list of pre-rendered
          pages. Subsequent requests to the same path will serve the generated
          page, like other pages pre-rendered at build time.<br /><br />
          3) Blocking : If fallback is 'blocking', new paths not returned by
          getStaticPaths will wait for the HTML to be generated, identical to
          SSR (hence why blocking), and then be cached for future requests so it
          only happens once per path.
        </h2>
        <h2>
          <a
            href="https://nextjs.org/docs/api-reference/data-fetching/get-static-paths#fallback-false"
            >detailed info on getStaticPaths</a
          >
        </h2>
        <h2>
          This is an method of getStaticPaths (from coffee-shop-locater project
          ):
        </h2>
        <textarea style="width: 100%" rows="8">
          
          export async function getStaticPaths() {
            return {
              paths: [{ params: { id: '1' } }, { params: { id: '2' } }],
              fallback: false, // can also be true or 'blocking'
            }
          }
        </textarea>
      </section>

      <section>
        <h1>nested task</h1>
        <ol class="header">
          <li>
            <h2>sub nested text</h2>
            <ol class="sub-header">
              <li><h3>text</h3></li>
              <li><h3>text</h3></li>
            </ol>
          </li>
          <li>
            <h2>text</h2>
          </li>
          <li>
            <h2>text</h2>
          </li>
        </ol>
      </section>
    </main>
    <footer></footer>
    <script src="../JS/Incldeheader.js"></script>
  </body>
</html>
